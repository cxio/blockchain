# 激励机制

对于一个开放的公共区块链系统来说，参与者是完全自由的，没有激励手段，自发的参与不可能形成。

在Bitcoin中，激励的手段有铸币奖励和交易费获利。铸币就是铸造者可以按规定的数量凭空生成比特币，这也是比特币的来源。交易费是交易被纳入区块需要支付的费用，类似银行转账的手续费。两种收益构成了Bitcoin系统运行的经济支撑。

另外还有一种设计：当铸币达一定总量后，系统会维持一个低新币发行量，交易费可有可无。这是一种低通胀模型，但无论如何，都需要利益的驱动。


## 原始铸币

本设计的初期铸币与Bitcion相似，但后期采用一种动态的*低通胀&通缩*模型。

初期铸币规则：

1. 前期预发布：
    - 三年试运行期，铸币分别为 `10、20、30` 币/块。
    - 此期间逐渐为人所知，铸币量逐年增加。避免初期少量用户占有过多币量。

2. 正式发行期：
    - 币量来到 `40` 币/块。按每 `2年` 递减 `20%` 铸币。
    - 币量计算以**币**为单位而不是**聪**，避免后期微量持续，早日结束初期阶段。
    - 当铸币递减到 `3币/块` 后，初期铸币结束。

后期按初期结束时的 `3币/块` 持续发币，维持一种系统性的低通胀率。这样可以充分保证矿工的收益，避免交易费过少时的窘境。

> **注：**
> 长期的通胀铸币其实是向全网征税。如果额度合适，就是合理的。


### 币量发行参考

采用恒星年（`365.25636日`）记年，**6分钟**区块间隔，每年将创建约 `87661` 个区块。

```go
年次    累计             次计               币量/块
-----------------------------------------------------------
1       876610          [876610 ]           10
2       2629830         [1753220]           20
3       5259660         [2629830]           30
-----------------------------------------------------------
-----------------------------------------------------------
5       7012880         [7012880]           40
7       12623184        [5610304]           32
9       17006234        [4383050]           25
11      20512674        [3506440]           20
13      23317826        [2805152]           16
15      25421690        [2103864]           12
17      26999588        [1577898]           9
19      28226842        [1227254]           7
21      29103452        [876610 ]           5
23      29804740        [701288 ]           4
25      30330706        [525966 ]           3
...     // 3币/块 长期微通胀……
-----------------------------------------------------------
初期三年： 5259660
减量发行： 30330706
发行总计： 35590366
```



## 通缩机制

**交易费**是转账中的币金差额，比如张三有 `1000` 毫币，转给李四 `998` 毫币。相差的**2**毫币贡献给了区块铸造者。

交易费是从已有的币金中来，如果我们设计对交易费进行销毁，则实际上就产生了一个通缩的逻辑。

**规则：**

- 区块的最终交易费总额只回收 `50%`。即**50%**的交易费被销毁。
- 系统有一个最低交易费额度，但只是一个*共约*，最终的额度由节点自行决定。

> **注：**
> 依然维持50%的交易费回收，是想要保有交易费激励的逻辑。

由此，创建了一种*动态的*通缩&通胀市场：

1. 当交易费增多时，销毁的币增多。效果：币总量减少，促使币值回升，抑制交易和交易费。
2. 当交易费减少时，销毁的币减少。效果：币总量回升，促使币值下降，促进交易，交易费回升。

这是一种回馈循环，原则上可以稳定币值。可能是正面的意义。


### 附：区块收益示例

假设一个区块收纳5万笔交易，平均交易费 `0.00016 bi`，则合计 `8bi`。

区块收益：`8/2 + 3 = 7` 币。

通胀&通缩：发行了**3**币，销毁了**4**币。结果为通缩**1**币。

这样的结果可能并不好，交易费可以再低一点，比如 `0.00008 bi`。这样，5万笔交易费的合计`4bi`，销毁2币，通胀1币。区块收益 `5bi`（3+2）。

如果要维持币量水平不变，交易费合计为 `6bi`，以此反推，交易费应在 6/50000 = `0.00012 bi`。

当然，所有的结果都是市场行为，没有人能控制。

> **注：**
> 最终影响交易费的可能是区块可收录的交易量，量越大，交易费就可以越低。
> 也就是说，技术进步越大，交易费就越低。



## 公共服务的激励

这里采用一个简单的设计：**铸造者收益的一部分分配给公共服务**。


### 铸币交易的结构

区块的收益在铸币交易 `Coinbase` 里体现，这是一个特殊的交易，除了包含铸造者证明之外，也包含了原始铸币、交易费获取等情况。

收益部分的结构：

- 收益总额：铸币 + 交易费 + 兑奖截留（前某区块未兑奖的部分）。
- 收益地址：铸造者（校验组）、铸凭者（铸凭交易提供者）、Findings、Blockqs、Archives奖励。


### 奖励分配

共有3个公共服务（`Findings`, `Blockqs`, `Archives`），分配比例如下：

- **铸造者**：`50%`，其中：校验组 `40%`，铸凭者 `10%`（铸凭交易提供者）。
- **Findings**：`15%`，节点发现服务网络。
- **Archives**：`15%`，数据网络：存档服务。
- **Blockqs**： `20%`，数据网络：区块查询服务。



## 公共服务的评估

公共服务是一个P2P网络，严格地评估服务节点是一件复杂的事，因为防止作弊会很困难。

因此这里采用一个极其简单的做法：**区块的铸造者可以随意选择获奖者，即便它没有提供服务**，没有任何限制……这看似很荒谬！

选择奖励者没有限制，但兑奖不是：*奖金的提取需要得到后续其他铸造者的认可*。规则为：

> **兑奖：**
> 在后续的 `48` 个区块内，需要得到至少**2**位铸造者的确认，才能提取全部奖励。

```go
确认数  当次占比    合计兑奖
-----------------------------
1       50%         50%
2       50%         100%
```

后续铸造者对前期奖励的确认在其铸币交易的「兑奖槽」里标记：

每一位铸造者需要对其前段**48**个区块内的奖励目标进行评估，如果目标服务良好，则对相应位置置位（否则忽略）。


### 细节参考

每个区块的外部奖励为**3**个服务账号（区块链地址），48个区块共 `144` 位标记（18字节）。即每一位铸造者都需要评估144笔奖励的合理性。

校验节点会缓存提供了良好服务的区块链账号，因此标记144个服务者其实只是简单的轮训缓存池即可。

完整标记48个区块需要4.8小时，但如果获奖者提前就满足了2个确认，系统允许在**25**个区块之后（已无分叉影响）就可以兑奖。

如果获奖地址在48个区块内没有得到完整数量的确认，按上面的规则截留的部分将被回收（即第49号区块）。


### 评估方法

#### Findings节点

向自己连接的Findings节点请求本类节点信息，建立连接。通过可连接性、准确率或响应效率，正常评估。


#### Archives节点

请求链上随机的某个区块、附件或交易，评估服务质量。比如30分钟评估一次，有效期10天。

> **注：**
> 大附件会有分片文件，可以仅请求其中一个分片验证即可。


#### Blockqs节点

校验节点会与之建立密切的联系，因此不会丢失可达性，正常评估即可。


### 缓存池记忆

公共服务网络的规模可能很大，服务节点十分离散。校验节点需要对提供过服务的节点进行缓存，以便确认足够宽泛。

这里假定服务网络为10,000个节点，48个区块按最高2次确认，缓存池大小估算：

- **评估者**：`48/2 = 24`，即每1个完整确认可以由24个区块来命中。
- **缓存池**：`10000/24 ~= 416`，校验者需要缓存的待评估目标（收益地址）数。

这只是一个简单的概算，实际的缓存中应有不少重叠，这需要在现实运行中调适。网络规模越大，命中率会越低。


### 分析：局部评估的合理性

*兑奖评估受限于铸造者对服务节点的观察范围，而不是全网可知，因此称之为局部评估*。

由于兑奖的约束，铸造者对受奖者的选择并非真的随意，奖励给一个并不提供服务的地址没有用，因为其它铸造者看不见。而如果选择一个自己开设的服务，其实也没啥，毕竟提供了服务。如果竞争激烈，效率和知名度也是需要付出的。

当然，这对仅仅提供公共服务而没有参与铸造的实体来说，有些不公。但参与铸造并不困难。

公共服务需要专业性，强大的公共服务商可能获得良好的名声，这在离散的铸造者那里是优势，因为离散铸造者通常不会自己去做那些专业的事。

P2P网络是松散的，如果公共服务节点众多，应用节点的视野范围会更局部，因此上面设计的确认数不高。



--------------------------------------------------------------------------

上一篇：[公共服务](3.公共服务.md)<br>
下一篇：[信用结构](5.信用结构.md)<br>
