## 链间授信

在区块链上，一个人想要告诉对方另一条链上的某个地址可信，通过本链上的交易来传递那条外链地址的信息，即可完成这个诉求。

因为只是一种可信告知，所以无需「链间兑换」的双向约束机制。


### 用例

- 甲拥有A链和B链上的地址 `甲a` 和 `甲b`，乙拥有A链和B链上的地址 `乙a` 和 `乙b`。
- 甲用 `甲a` 给 `甲b` 地址授信，向乙说明 `甲b` 地址可信。
- 因为 `乙a` 可以验证 `甲a` 的信用，所以 `乙b` 就可以相信 `甲b` 。
- 这样 `A链` 就向 `B链` 传递了信用。


### 过程

1. `甲a` 向 `乙a` 发送一个数字资产 `AA`，输出脚本中提供 `甲b` 的地址和可能需要的说明消息 `Msg`。
2. 乙侦测 `乙a` 地址发现收到了资产 `AA`，运行输出脚本提取 `甲b` 和 `Msg`。触发 `乙b` 向 `甲b` 地址发送资产或做其它事情。
3. 这样，`A链` 上的交易行为就传递到了 `B链` 上。

> **注：**<br>
> 如果需要隐秘传递，甲向乙发送AA资产的交易里 `甲b` 和 `Msg` 可以加密，加密方式需要双方约定。<br>
> 因为AA资产交易里没有赎回逻辑，所以乙并不需要构建转移交易，但需主动运行输出脚本以获取相关信息。<br>
> 实际上，`甲b` 地址不必是甲自己的，它只是甲授信的一个目标地址而已。<br>


### 脚本

**A链：资产转移 `AA: 甲a => 乙a`**

```go
// 解锁参数
// <sig> <pubKey>       // 系统内置验证

// 锁定脚本
DATA{<chainB:甲b>}      // B链上的甲b地址可信
DATA{<Msg>}             // 附加说明（约定格式）
@POPS[2] OUTPUT         // 导出前面的2项数据
BUFDUMP                 // 转储触发外部 App(甲b, Msg)。
```
> **说明：**<br>
> 乙花费该输出时也会有 `BUFDUMP` 触发逻辑，但监听是私有的，BUFDUMP非阻塞执行。<br>
> 这不会对其它公共验证节点带来任何问题。任何一个节点也可以监听该事务。


**B链：资产转移 `乙b => 甲b`**（或其它事情）

> **注：**<br>
> 乙注册的监听由另外的服务提供，应当包含了对接收地址和资产类别的判断。<br>
> 乙运行的外部App是私有逻辑，只是代替人工执行自动的操作。<br>

```go
// 乙获知甲在B链上的地址，实施链外约定的任何交易。
```
