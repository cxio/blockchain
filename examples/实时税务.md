## 实时税务

> **注**：假设为一种新的监管方式。

用户向企业支付币金时，输出脚本可以包含财务汇报的逻辑。当这些币金被花费时，财务汇报自动执行。

因为财务汇报逻辑由支付者设置，企业无法自主，所以除非合谋，理论上企业无法逃税。


### 条件

接收财务汇报的管理机构预先发布一笔管理者交易，包含一笔统计功能的介管脚本。


### 支付脚本（币金）

由用户支付给企业，锁定脚本设定了汇报逻辑。

```go
SYS_CHKPASS             // 系统内置验证

@IN{Account}            // 账户信息（公钥哈希）
@IN{Amount}             // 花费的币金数量

GOTO[<Year>, <TxID>, <n>]   // 跳转到监管机构统计脚本
```


### 统计脚本（介管）

由监管机构预先发布，适用于所有需要汇报的花费。

```go
ENV{InGoto} PASS        // 确定由GOTO跳转过来

ENV{Source0}            // 主脚本
MODEL{                  // 版权物凭信验证（ENV{Source0}）
    SYS_CHKPASS         // 严格匹配
    @IN{Account}        // 严格匹配
    @IN{Amount}         // 严格匹配
    GOTO[?, ?, ?]       // 必须为一个 GOTO
}
PASS                    // 主脚本验证，通过
END                     // 结束公共验证

@POPS[2]                // 提取传入的账户信息和币金花费
OUTPUT BUFDUMP          // 导出并触发监管服务器上的中间件，执行验证&登记
```
