## 存在性证明

表示一个客观存在。比如证明自己才是原创，或者记录一个有意义的事件。

对于一笔交易来说，时间戳可以是任意的，这可能带来一个致命缺陷：你无法严格确知两笔交易在现实中谁先出现，因为交易可能被延迟收录。

比如一位作者发布了一条*原创声明*的存证交易，一名攻击者看到后，完全可以发布相同的声明，修改版权且设定更早的时间戳。因为交易被延迟收录很正常，这种混淆是没有办法分辨的。

本系统中设计了**交易过期**的规则，因此可以解决这一问题。


### 操作

分两次发布原创声明。

1. 先发布一笔结果证明的交易，内容为原创证明的哈希摘要。
2. 等待该交易上链且经过足够的时间（交易过期时长）后，发布原创声明本身。其中可引用结果证明以便于验证。


### 脚本

#### 结果证明（介管）

```go
OUT{Content}            // 取存证内容（Bytes）
OUT{Attachment}         // 取存证附件ID（Bytes）
ADD                     // 串接
FN_HASH256              // 计算哈希摘要
DATA{<hashResult>}      // 预置哈希结果
EQUAL                   // 栈顶2项是否相同
```


#### 原创声明（存证）

```go
// 嵌入结果证明
EMBED[<Year>, <TxID>, <Index>]
NOT
IF{                     // 栈顶项为嵌入脚本的执行结果
    "Bad!" PRINT        // 不符合提示
    EXIT                // 检查结束
}
"Good!" PRINT           // 符合，友好提示

// 以下为可选
@ENV{TxID}              // 取当前交易ID
@OUT{Title}             // 取存证标题
OUTPUT BUFDUMP          // 导出，触发外部应用逻辑
```

> **注：**
> 下段的可选部分由具体的应用端自行处理。
